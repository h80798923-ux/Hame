<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Onur Chatting</title>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#121212; color:#fff; }
    header { background:#075E54; padding:12px; display:flex; align-items:center; justify-content:space-between; color:white; font-weight:bold; }
    header img { width:40px; height:40px; border-radius:50%; margin-right:10px; }
    #messages { height:60vh; overflow-y:auto; padding:10px; display:flex; flex-direction:column; }
    .msg { max-width:70%; margin:5px; padding:10px; border-radius:10px; position:relative; }
    .me { background:#25D366; align-self:flex-end; }
    .other { background:#333; align-self:flex-start; }
    .msg small { display:block; font-size:10px; opacity:0.7; margin-top:5px; }
    .deleteBtn { position:absolute; top:2px; right:5px; font-size:12px; cursor:pointer; }
    footer { display:flex; padding:8px; background:#1e1e1e; }
    input { flex:1; padding:10px; border:none; border-radius:20px; }
    button { margin-left:5px; padding:10px 15px; border:none; border-radius:20px; background:#25D366; color:white; font-weight:bold; }
    #statusArea { background:#1e1e1e; padding:10px; height:80px; overflow-x:auto; white-space:nowrap; }
    .status { display:inline-block; background:#333; padding:10px; border-radius:10px; margin:5px; }
    .profile { display:flex; align-items:center; }
  </style>
</head>
<body>
  <header>
    <div class="profile">
      <img id="profilePic" src="https://via.placeholder.com/40" alt="Profil">
      <span id="profileName">Onur</span>
    </div>
    <button onclick="changeProfile()">‚öôÔ∏è</button>
  </header>

  <div id="statusArea"></div>
  <div id="messages"></div>

  <footer>
    <input id="msgInput" placeholder="Mesaj yaz...">
    <button onclick="sendMessage()">G√∂nder</button>
  </footer>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getDatabase, ref, push, onChildAdded, remove, set } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-database.js";

    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyCGtiscjlxNrjMy0JIWSmg1xJ5Beqpe_1o",
      authDomain: "messen-7526f.firebaseapp.com",
      projectId: "messen-7526f",
      storageBucket: "messen-7526f.firebasestorage.app",
      messagingSenderId: "586198763347",
      appId: "1:586198763347:web:4fb30c0a8018f4228f03a6",
      databaseURL: "https://messen-7526f-default-rtdb.firebaseio.com/"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const messagesRef = ref(db, "messages");
    const statusRef = ref(db, "status");

    let username = prompt("Kullanƒ±cƒ± adƒ±nƒ± gir:") || "Bilinmeyen";
    let profilePic = "https://via.placeholder.com/40";

    document.getElementById("profileName").innerText = username;
    document.getElementById("profilePic").src = profilePic;

    // Profil deƒüi≈ütirme
    function changeProfile() {
      const newName = prompt("Yeni adƒ±nƒ± gir:", username);
      const newPic = prompt("Profil fotoƒürafƒ± URL gir:", profilePic);
      if(newName) username = newName;
      if(newPic) profilePic = newPic;
      document.getElementById("profileName").innerText = username;
      document.getElementById("profilePic").src = profilePic;
    }
    window.changeProfile = changeProfile;

    // Mesaj G√∂nder
    function sendMessage() {
      const text = document.getElementById("msgInput").value;
      if (!text) return;
      push(messagesRef, {
        user: username,
        pic: profilePic,
        text: text,
        time: new Date().toLocaleTimeString()
      });
      document.getElementById("msgInput").value = "";
    }
    window.sendMessage = sendMessage;

    // Mesajlarƒ± Listele
    onChildAdded(messagesRef, snap => {
      const data = snap.val();
      const key = snap.key;
      const div = document.createElement("div");
      div.classList.add("msg");
      div.classList.add(data.user === username ? "me" : "other");
      div.innerHTML = `
        <div class="profile"><img src="${data.pic}" width="20" height="20" style="border-radius:50%;margin-right:5px;"> <b>${data.user}</b></div>
        ${data.text}
        <small>${data.time}</small>
        <span class="deleteBtn" onclick="deleteMessage('${key}')">üóë</span>
      `;
      document.getElementById("messages").appendChild(div);
      document.getElementById("messages").scrollTop = document.getElementById("messages").scrollHeight;
    });

    // Mesaj Sil
    function deleteMessage(id) {
      remove(ref(db, "messages/" + id));
    }
    window.deleteMessage = deleteMessage;

    // Durum Ekle
    function addStatus() {
      const st = prompt("Durumunuzu yazƒ±n:");
      if (!st) return;
      push(statusRef, { user: username, text: st });
    }
    window.addStatus = addStatus;

    // Durumlarƒ± Listele
    onChildAdded(statusRef, snap => {
      const s = snap.val();
      const div = document.createElement("div");
      div.classList.add("status");
      div.innerText = `${s.user}: ${s.text}`;
      document.getElementById("statusArea").appendChild(div);
    });
  </script>
</body>
</html>Input").value.trim();
      if (text) {
        push(statusRef, { user: username, text: text, time: Date.now() });
        document.getElementById("statusInput").value = "";
      }
    };

    // Durumlarƒ± G√∂ster
    onChildAdded(statusRef, (data) => {
      const s = data.val();
      const div = document.createElement("div");
      div.classList.add("status");
      div.innerHTML = `<b>${s.user}</b>: ${s.text}`;
      document.getElementById("statusList").appendChild(div);
    });

    // Durum alanƒ±nƒ± a√ß/kapat
    document.getElementById("statusBtn").onclick = () => {
      const area = document.getElementById("statusArea");
      area.style.display = area.style.display === "none" ? "flex" : "none";
    };
  </script>
</body>
</html>rname, text: text, time: Date.now() });
        document.getElementById("statusInput").value = "";
      }
    };

    // Durumlarƒ± G√∂ster
    onChildAdded(statusRef, (data) => {
      const s = data.val();
      const div = document.createElement("div");
      div.classList.add("status");
      div.innerText = `${s.user}: ${s.text}`;
      document.getElementById("statusList").appendChild(div);
    });

    // Durum Alanƒ± A√ß/Kapat
    document.getElementById("statusBtn").onclick = () => {
      const area = document.getElementById("statusArea");
      area.style.display = area.style.display === "none" ? "block" : "none";
    };
  </script>
</body>
</html>